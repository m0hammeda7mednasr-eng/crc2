# Test Webhook - User-Specific URL
# Replace {userId} with actual user ID from database

### Test 1: Send incoming message to specific user
POST https://crc2-production.up.railway.app/api/webhook/incoming/{userId}
Content-Type: application/json

{
  "phoneNumber": "+201234567890",
  "content": "مرحباً! هذه رسالة تجريبية",
  "customerName": "أحمد محمد",
  "type": "text"
}

### Test 2: Send incoming message (n8n format)
POST https://crc2-production.up.railway.app/api/webhook/incoming/{userId}
Content-Type: application/json

{
  "from": "+201234567890",
  "body": "Hello! This is a test message",
  "name": "Ahmed Mohamed"
}

### Test 3: Get Shopify webhook URL for user
GET https://crc2-production.up.railway.app/api/webhook/shopify/url?userId={userId}

### Test 4: Send Shopify order (with shop domain)
POST https://crc2-production.up.railway.app/api/webhook/shopify/orders?shop=my-store
Content-Type: application/json

{
  "id": 12345,
  "order_number": 1001,
  "name": "#1001",
  "total_price": "150.00",
  "customer": {
    "first_name": "أحمد",
    "last_name": "محمد",
    "phone": "+201234567890"
  },
  "line_items": [
    {
      "name": "منتج تجريبي",
      "quantity": 2,
      "price": "75.00"
    }
  ]
}

### Instructions:
# 1. Login to the app and get your user ID from the token
# 2. Replace {userId} in the URLs above with your actual user ID
# 3. Use Postman, Insomnia, or REST Client extension to test
# 4. Check the app to see if messages/orders appear
